---
import BaseLayout from '../layouts/BaseLayout.astro';
const modProjects = import.meta.glob('../../content/projects/*.md', { eager: true });
const projects = Object.values(modProjects).map(m => m.frontmatter);
---
<BaseLayout>
  <section class="container">
    <h1>Portfolio</h1>
    <label>Filter:</label>
    <select id="filter" onChange="filterProjects()">
      <option>All</option>
      <option>AI storytelling</option>
      <option>Real Shot / Live Action</option>
      <option>Virtual Production</option>
      <option>Post Production</option>
    </select>
    <div id="projects" class="grid" style="grid-template-columns:repeat(3,1fr)">
      {projects.map(p => (
        <div class="card" data-cat={p.category}>
          <img src={p.image} alt={p.title} style="width:100%;"/>
          <h3>{p.title}</h3>
        </div>
      ))}
    </div>
  </section>
  <script is:inline>
    function filterProjects() {
      const val = document.getElementById('filter').value;
      document.querySelectorAll('.card').forEach(c => {
        c.style.display = (val==='All'||c.dataset.cat===val)?'block':'none';
      });
    }
  </script>
</BaseLayout>